(window.webpackJsonp=window.webpackJsonp||[]).push([[11,4],{151:function(t,e,r){"use strict";var a=r(154),n=r.n(a),i=r(5),o=r.n(i),u=r(53),s=r(155),d=r.n(s),c=function(t){return"GET"===t.method.toUpperCase()&&(t.params=t.data),d()(o()({},t,{baseURL:"http://beastsclub.cn/icheritage/web/app_dev.php/"})).then(function(t){return t.data&&0==t.data.code?t.data:5005!==t.data.code?(u.Message.error(t.data.msg),n.a.reject(t.data)):(u.Message.error(t.data.msg),void(window.location.href="/#/login"))})},l=r(150),m=r.n(l),g=function(t){return c({url:"/login",data:m.a.stringify(t),method:"post"})},p=function(t){return c({url:"/logout",data:m.a.stringify(t),method:"post"})},f=function(t){return c({url:"/admin/user/",data:t,method:"get"})},h=function(t){return c({url:"/admin/user/register",data:m.a.stringify(t),method:"post"})},v=function(t){return c({url:"/admin/user/user_update",data:m.a.stringify(t),method:"post"})},y=function(t){return c({url:"/admin/user/unlock",data:m.a.stringify(t),method:"post"})},b=function(t){return c({url:"/admin/user/lock",data:m.a.stringify(t),method:"post"})},w=function(t){return c({url:"/admin/user/changepwd",data:m.a.stringify(t),method:"post"})},_=function(t){return c({url:"/admin/user/resetPwd",data:m.a.stringify(t),method:"post"})},F=function(t){return c({url:"/admin/menu/list",data:t,method:"get"})},k=function(t){return c({url:"/admin/menu/new",data:m.a.stringify(t),method:"post"})},C=function(t){return c({url:"/admin/menu/edit",data:m.a.stringify(t),method:"post"})},x=function(t){return c({url:"/admin/menu/del",data:m.a.stringify(t),method:"post"})},I=function(t){return c({url:"/admin/tag/list",data:t,method:"get"})},T=function(t){return c({url:"/admin/tag/new",data:m.a.stringify(t),method:"post"})},L=function(t){return c({url:"/admin/tag/edit",data:m.a.stringify(t),method:"post"})},S=function(t){return c({url:"/admin/tag/del",data:m.a.stringify(t),method:"post"})},M=function(t){return c({url:"/admin/search/list",data:t,method:"get"})},$=function(t){return c({url:"/admin/search/new",data:m.a.stringify(t),method:"post"})},U=function(t){return c({url:"/admin/search/edit",data:m.a.stringify(t),method:"post"})},R=function(t){return c({url:"/admin/search/del",data:m.a.stringify(t),method:"post"})},D=function(t){return c({url:"/admin/webuser/list",data:t,method:"get"})},O=function(t){return c({url:"/admin/webuser/agree",data:m.a.stringify(t),method:"post"})},N=function(t){return c({url:"/admin/webuser/refused",data:m.a.stringify(t),method:"post"})},q=function(t){return c({url:"/admin/comment/list",data:t,method:"get"})},j=function(t){return c({url:"/admin/comment/agree",data:m.a.stringify(t),method:"post"})},V=function(t){return c({url:"/admin/comment/refused",data:m.a.stringify(t),method:"post"})},E=function(t){return c({url:"/admin/startpage/list",data:t,method:"get"})},H=function(t){return c({url:"/admin/startpage/startpage_new",data:m.a.stringify(t),method:"post"})},A=function(t){return c({url:"/admin/startpage/startpage_update",data:m.a.stringify(t),method:"post"})},z=function(t){return c({url:"/admin/startpage/shelve",data:m.a.stringify(t),method:"post"})},G=function(t){return c({url:"/admin/startpage/offshelve",data:m.a.stringify(t),method:"post"})},P=function(t){return c({url:"/admin/startpage/startpage_imglist",data:t,method:"get"})},B=function(t){return c({url:"/admin/startpage/startpage_img_new",data:m.a.stringify(t),method:"post"})},J=function(t){return c({url:"/admin/startpage/startpage_img_edit",data:m.a.stringify(t),method:"post"})},Y=function(t){return c({url:"/admin/startpage/startpage_img_del",data:m.a.stringify(t),method:"post"})},X=function(t){return c({url:"/admin/focus/",data:t,method:"get"})},W=function(t){return c({url:"/admin/focus/new",data:m.a.stringify(t),method:"post"})},K=function(t){return c({url:"/admin/focus/edit",data:m.a.stringify(t),method:"post"})},Z=function(t){return c({url:"/admin/focus/del",data:m.a.stringify(t),method:"post"})},Q=function(t){return c({url:"/admin/focus/sort",data:m.a.stringify(t),method:"post"})},tt=function(t){return c({url:"/admin/focus/recover",data:m.a.stringify(t),method:"post"})},et=function(t){return c({url:"/admin/group/list",data:t,method:"get"})},rt=function(t){return c({url:"/admin/group/new",data:m.a.stringify(t),method:"post"})},at=function(t){return c({url:"/admin/group/edit",data:m.a.stringify(t),method:"post"})},nt=function(t){return c({url:"/admin/group/del",data:m.a.stringify(t),method:"post"})},it=function(t){return c({url:"/admin/group/sort",data:m.a.stringify(t),method:"post"})},ot=function(t){return c({url:"/admin/group/recover",data:m.a.stringify(t),method:"post"})},ut=function(t){return c({url:"/admin/group/agree",data:m.a.stringify(t),method:"post"})},st=function(t){return c({url:"/admin/group/view",data:t,method:"get"})},dt=function(t){return c({url:"/admin/activity/list",data:t,method:"get"})},ct=function(t){return c({url:"/admin/activity/new",data:m.a.stringify(t),method:"post"})},lt=function(t){return c({url:"/admin/activity/edit",data:m.a.stringify(t),method:"post"})},mt=function(t){return c({url:"/admin/activity/del",data:m.a.stringify(t),method:"post"})},gt=function(t){return c({url:"/admin/activity/sort",data:m.a.stringify(t),method:"post"})},pt=function(t){return c({url:"/admin/activity/recover",data:m.a.stringify(t),method:"post"})},ft=function(t){return c({url:"/admin/activity/tag",data:t,method:"get"})},ht=function(t){return c({url:"/admin/activity/edit/info",data:t,method:"get"})},vt=function(t){return c({url:"/admin/produce/menu",data:t,method:"get"})},yt=function(t){return c({url:"/admin/produce/list",data:t,method:"get"})},bt=function(t){return c({url:"/admin/produce/del",data:t,method:"post"})},wt=function(t){return c({url:"/admin/produce/new",data:t,method:"post"})},_t=function(t){return c({url:"/admin/produce/edit",data:t,method:"post"})},Ft=function(t){return c({url:"/admin/produce/edit/info",data:t,method:"get"})},kt=function(t){return c({url:"/admin/produce/recover",data:t,method:"post"})},Ct=function(t){return c({url:"/admin/activity/state",data:t,method:"get"})};r.d(e,"O",function(){return g}),r.d(e,"P",function(){return p}),r.d(e,"x",function(){return f}),r.d(e,"m",function(){return v}),r.d(e,"kb",function(){return y}),r.d(e,"N",function(){return b}),r.d(e,"b",function(){return w}),r.d(e,"Q",function(){return h}),r.d(e,"fb",function(){return _}),r.d(e,"E",function(){return F}),r.d(e,"U",function(){return k}),r.d(e,"r",function(){return C}),r.d(e,"h",function(){return x}),r.d(e,"L",function(){return I}),r.d(e,"Z",function(){return T}),r.d(e,"w",function(){return L}),r.d(e,"l",function(){return S}),r.d(e,"H",function(){return M}),r.d(e,"W",function(){return $}),r.d(e,"t",function(){return U}),r.d(e,"j",function(){return R}),r.d(e,"M",function(){return D}),r.d(e,"lb",function(){return O}),r.d(e,"mb",function(){return N}),r.d(e,"B",function(){return q}),r.d(e,"c",function(){return j}),r.d(e,"d",function(){return V}),r.d(e,"J",function(){return E}),r.d(e,"Y",function(){return H}),r.d(e,"v",function(){return A}),r.d(e,"gb",function(){return z}),r.d(e,"ab",function(){return G}),r.d(e,"I",function(){return P}),r.d(e,"X",function(){return B}),r.d(e,"u",function(){return J}),r.d(e,"k",function(){return Y}),r.d(e,"C",function(){return X}),r.d(e,"S",function(){return W}),r.d(e,"o",function(){return K}),r.d(e,"f",function(){return Z}),r.d(e,"ib",function(){return Q}),r.d(e,"cb",function(){return tt}),r.d(e,"D",function(){return et}),r.d(e,"T",function(){return rt}),r.d(e,"p",function(){return at}),r.d(e,"g",function(){return nt}),r.d(e,"jb",function(){return it}),r.d(e,"db",function(){return ot}),r.d(e,"a",function(){return ut}),r.d(e,"nb",function(){return st}),r.d(e,"y",function(){return dt}),r.d(e,"R",function(){return ct}),r.d(e,"n",function(){return lt}),r.d(e,"e",function(){return mt}),r.d(e,"hb",function(){return gt}),r.d(e,"bb",function(){return pt}),r.d(e,"A",function(){return ft}),r.d(e,"z",function(){return ht}),r.d(e,"G",function(){return vt}),r.d(e,"F",function(){return yt}),r.d(e,"i",function(){return bt}),r.d(e,"eb",function(){return kt}),r.d(e,"K",function(){return Ct}),r.d(e,"V",function(){return wt}),r.d(e,"s",function(){return _t}),r.d(e,"q",function(){return Ft})},152:function(t,e,r){"use strict";var a={checkAuth:function(t){var e=localStorage.getItem("isTenantAdmin"),r=localStorage.getItem("ms_userRight");return!parseInt(e)&&!(r&&-1<r.indexOf(t))},timeAddZero:function(t){return t<10?"0"+t:""+t},dateFormat:function(t,e){if(t&&e){var r=t.getFullYear(),a=t.getMonth()<9?"0"+parseInt(t.getMonth()+1):t.getMonth()+1,n=t.getDate()<10?"0"+t.getDate():t.getDate(),i=t.getHours()<10?"0"+t.getHours():t.getHours(),o=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),u=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();switch(e){case"yy-mm-dd h:m:s":return r+"-"+a+"-"+n+" "+i+":"+o+":"+u;case"yy-mm-dd h:m":return r+"-"+a+"-"+n+" "+i+":"+o;case"yy-mm-dd":return r+"-"+a+"-"+n;case"mm-dd h:m":return a+"-"+n+" "+i+":"+o;case"mm-dd":return a+"-"+n;case"h:m":return i+":"+o;case"h:m:s":return i+":"+o+":"+u;case"HH:mm MM/dd/yyyy":return i+":"+o+" "+a+"/"+n+"/"+r;case"mm-dd d":return a+"月"+n+" "+["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][t.getDay()]}}},getDate:function(t,e){if(t&&e){var r=(t=new Date(1e3*t)).getFullYear(),a=t.getMonth()<9?"0"+parseInt(t.getMonth()+1):t.getMonth()+1,n=t.getDate()<10?"0"+t.getDate():t.getDate();switch(e){case"yy-mm-dd":return r+"-"+a+"-"+n}}},getTime:function(t,e){if(t&&e){var r=(t=new Date(1e3*t)).getFullYear(),a=t.getMonth()<9?"0"+parseInt(t.getMonth()+1):t.getMonth()+1,n=t.getDate()<10?"0"+t.getDate():t.getDate(),i=t.getHours()<10?"0"+t.getHours():t.getHours(),o=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),u=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();switch(e){case"yy-mm-dd h:m:s":return r+"-"+a+"-"+n+" "+i+":"+o+":"+u}}},getTimestamp:function(t){if(t)return t.getTime()},getSeconds:function(t){if(t)return 60*t.getHours()*60+60*t.getMinutes()+t.getSeconds()},copyText:function(t){var e=document.createRange();e.selectNode(t);var r=window.getSelection();0<r.rangeCount&&r.removeAllRanges(),r.addRange(e),document.execCommand("Copy")},setCookie:function(t,e,r){var a=new Date;a.setTime(a.getTime()+60*r*60*1e3),document.cookie=t+"="+escape(e)+(null==r?"":";expires="+a.toGMTString())},getCookie:function(t){if(0<document.cookie.length){var e=document.cookie.indexOf(t+"=");if(-1!=e){e=e+t.length+1;var r=document.cookie.indexOf(";",e);return-1==r&&(r=document.cookie.length),unescape(document.cookie.substring(e,r))}}return""},delCookie:function(t){var e=new Date;e.setTime(e.getTime()-1);var r=this.getCookie(t);null!=r&&(document.cookie=t+"="+r+";expires="+e.toGMTString())}};e.a=a},153:function(t,e,r){"use strict";r.d(e,"b",function(){return a}),r.d(e,"a",function(){return n}),r.d(e,"c",function(){return i});var a="http://beastsclub.cn/icheritage/web/",n="http://beastsclub.cn",i="http://beastsclub.cn/icheritage/web/app_dev.php"},156:function(t,e,r){},158:function(t,e,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",[r("div",[e.inputShow?r("input",{attrs:{type:"file",id:"change",accept:"image"},on:{change:e.change}}):e._e()])]),e._v(" "),r("el-dialog",{staticClass:"ui-dialog-min",staticStyle:{"line-height":"0","text-align":"left"},attrs:{id:e.dialogId,"append-to-body":"",title:"裁剪",visible:e.panel,"close-on-click-modal":!1},on:{open:e.dialogOpen,close:e.diaglogClose,"update:visible":function(t){e.panel=t}}},[r("el-row",[r("el-col",{attrs:{span:24}},[r("div",{staticClass:"avatar-wrapper"},[r("img",{attrs:{id:e.picId,src:e.url,alt:"Picture"}})])])],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticClass:"btn-1",on:{click:function(t){e.panel=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{staticClass:"btn-2",attrs:{type:"primary"},on:{click:e.crop}},[e._v("确 定")])],1)],1)],1)};a._withStripped=!0;var n=r(160),i={props:["aspectRatio","data","uploadUrl","extensions","maxFileSize"],data:function(){return{picValue:"",picId:"image",dialogId:"dialogId",cropper:"",croppable:!1,panel:!1,inputShow:!0,url:"",cropArgs:{toCropImgH:"",toCropImgW:"",toCropImgX:"",toCropImgY:""}}},mounted:function(){this.picId="image"+Math.random(),this.dialogId="dialogId"+Math.random()},methods:{getObjectURL:function(t){var e=null;return null!=window.createObjectURL?e=window.createObjectURL(t):null!=window.URL?e=window.URL.createObjectURL(t):null!=window.webkitURL&&(e=window.webkitURL.createObjectURL(t)),e},change:function(t){var e=t.target.files||t.dataTransfer.files;if(e.length){if(this.picValue=e[0],""!=this.extensions&&null!=this.extensions){for(var r=this.extensions.split(","),a=0,n=0;n<r.length;n++)-1<this.picValue.type.indexOf(r[n])&&a++;if(0==a)return t.target.value="",void this.$emit("imageuploadedError","只允许上传"+this.extensions)}if(""!=this.maxFileSize&&null!=this.maxFileSize&&this.picValue.size>this.maxFileSize)return t.target.value="",void this.$emit("imageuploadedError","只允许上传小于"+this.maxFileSize/1024/1024+"M的图片");this.panel=!0,this.url=this.getObjectURL(this.picValue),this.inputShow=!1}},crop:function(){var t;this.panel=!1,this.croppable&&(t=this.cropper.getCroppedCanvas(),this.picValue=this.dataURItoBlob(t.toDataURL()),this.cropArgs={toCropImgH:parseInt(this.cropper.getData().height),toCropImgW:parseInt(this.cropper.getData().width),toCropImgX:parseInt(this.cropper.getData().x),toCropImgY:parseInt(this.cropper.getData().y)},this.postImg())},dataURItoBlob:function(t){for(var e=atob(t.split(",")[1]),r=t.split(",")[0].split(":")[1].split(";")[0],a=new ArrayBuffer(e.length),n=new Uint8Array(a),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return new Blob([a],{type:r})},getRoundedCanvas:function(t){var e=document.createElement("canvas"),r=e.getContext("2d"),a=t.width,n=t.height;return e.width=a,e.height=n,r.imageSmoothingEnabled=!0,r.drawImage(t,0,0,a,n),r.globalCompositeOperation="destination-in",r.beginPath(),r.arc(a/2,n/2,Math.min(a,n)/2,0,2*Math.PI,!0),r.fill(),e},postImg:function(){var t=this,e=new FormData;e.append("files",this.picValue);var r=new XMLHttpRequest;r.open("post",this.uploadUrl),r.send(e),r.onload=function(){t.inputShow=!0,t.$emit("imageuploaded",JSON.parse(r.responseText))}},diaglogClose:function(){this.inputShow=!0;var t=document.getElementById(this.dialogId);document.body.removeChild(t)},dialogOpen:function(){var e=this;this.cropper?this.cropper.replace(this.url):this.$nextTick(function(){var t=document.getElementById(this.picId);this.cropper=new n.a(t,{aspectRatio:e.aspectRatio,viewMode:1,background:!1,zoomable:!0,ready:function(){e.croppable=!0}})})}}},o=(r(159),r(1)),u=Object(o.a)(i,a,[],!1,null,null,null);u.options.__file="src/views/cropper.vue";e.a=u.exports},159:function(t,e,r){"use strict";var a=r(156);r.n(a).a},181:function(t,e,r){},250:function(t,e,r){"use strict";var a=r(181);r.n(a).a},255:function(t,e,r){"use strict";r.r(e);var a=function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("el-row",[n("el-form",{ref:"form",attrs:{rules:a.rules,model:a.createForm,"label-width":"80px"}},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[a._v(a._s(a.$route.query.name))])]),a._v(" "),n("el-form-item",{attrs:{label:"标题",prop:"title"}},[n("el-input",{attrs:{placeholder:"请输入标题"},model:{value:a.createForm.title,callback:function(t){a.$set(a.createForm,"title",t)},expression:"createForm.title"}})],1),a._v(" "),n("el-form-item",{staticClass:"focus",attrs:{label:"图标",prop:"imageUrl"}},[n("div",{staticClass:"avatar-uploader"},[n("div",{staticClass:"avatar-uploader"},[n("div",{staticClass:"el-upload el-upload--text"},[n("keep-alive",[n("Cropper",{ref:"imgCrop",attrs:{uploadUrl:a.uploadUrl,maxFileSize:2097152,extensions:"png,gif,jpeg,jpg",aspectRatio:16/9},on:{imageuploaded:a.handleAvatarSuccess,imageuploadedError:a.imageuploadedError}})],1),a._v(" "),a.createForm.imageUrl?n("img",{staticClass:"avatar",attrs:{src:a.createForm.imageUrl}}):n("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)])]),a._v(" "),n("div",{staticClass:"tips"},[a._v("请上传2M以内的JPG/JPEG/PNG/GIF图片")])]),a._v(" "),n("el-form-item",{attrs:{label:"级别",prop:"tag"}},[n("el-radio-group",{model:{value:a.createForm.tag,callback:function(t){a.$set(a.createForm,"tag",t)},expression:"createForm.tag"}},[n("el-radio",{attrs:{label:"联合国"}},[a._v("联合国")]),a._v(" "),n("el-radio",{attrs:{label:"国家级"}},[a._v("国家级")]),a._v(" "),n("el-radio",{attrs:{label:"省级"}},[a._v("省级")]),a._v(" "),n("el-radio",{attrs:{label:"市级"}},[a._v("市级")])],1)],1),a._v(" "),n("el-form-item",{attrs:{label:"日期",prop:"dateValue"}},[n("el-date-picker",{attrs:{"value-format":"timestamp",type:"date",placeholder:"选择日期"},model:{value:a.createForm.dateValue,callback:function(t){a.$set(a.createForm,"dateValue",t)},expression:"createForm.dateValue"}})],1),a._v(" "),n("el-form-item",{attrs:{label:"地区",prop:"area"}},[n("el-cascader",{attrs:{size:"large",options:a.options},model:{value:a.createForm.area,callback:function(t){a.$set(a.createForm,"area",t)},expression:"createForm.area"}})],1),a._v(" "),n("el-form-item",{attrs:{label:"地址",prop:"address"}},[n("el-input",{attrs:{placeholder:"请输入地址"},model:{value:a.createForm.address,callback:function(t){a.$set(a.createForm,"address",t)},expression:"createForm.address"}})],1),a._v(" "),n("el-form-item",{attrs:{label:"经度",prop:"lng"}},[n("el-input",{attrs:{placeholder:"请输入经度"},model:{value:a.createForm.lng,callback:function(t){a.$set(a.createForm,"lng",t)},expression:"createForm.lng"}})],1),a._v(" "),n("el-form-item",{attrs:{label:"纬度",prop:"lat"}},[n("el-input",{attrs:{placeholder:"请输入纬度"},model:{value:a.createForm.lat,callback:function(t){a.$set(a.createForm,"lat",t)},expression:"createForm.lat"}})],1),a._v(" "),a._l(a.tagList,function(r){return n("el-form-item",{key:r.id,staticClass:"reset-height",attrs:{label:r.className}},[n("el-checkbox-group",{model:{value:a.checkList,callback:function(t){a.checkList=t},expression:"checkList"}},a._l(r.tagName.split(","),function(t,e){return n("el-checkbox",{key:e,attrs:{label:r.className+","+t}},[a._v(a._s(t))])}))],1)})],2),a._v(" "),n("el-card",{staticClass:"box-card"},[n("el-form-item",{attrs:{label:"新闻类型",prop:"newsTag"}},[n("el-radio-group",{model:{value:a.createForm.newsTag,callback:function(t){a.$set(a.createForm,"newsTag",t)},expression:"createForm.newsTag"}},[n("el-radio",{attrs:{label:0}},[a._v("普通新闻")]),a._v(" "),n("el-radio",{attrs:{label:1}},[a._v("网页新闻")])],1)],1),a._v(" "),n("el-form-item",{attrs:{label:"署名作者",prop:"author"}},[n("el-input",{attrs:{placeholder:"请输入署名作者"},model:{value:a.createForm.author,callback:function(t){a.$set(a.createForm,"author",t)},expression:"createForm.author"}})],1),a._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==a.createForm.newsTag,expression:"createForm.newsTag == 0"}],attrs:{label:"正文内容",prop:"editorContent"}},[n("div",{ref:"editor",staticStyle:{"text-align":"left"}})]),a._v(" "),1==a.createForm.newsTag?n("el-form-item",{attrs:{label:"正文内容",prop:"link"}},[n("el-input",{attrs:{placeholder:"请输入网页链接"},model:{value:a.createForm.link,callback:function(t){a.$set(a.createForm,"link",t)},expression:"createForm.link"}})],1):a._e()],1),a._v(" "),n("el-card",[n("el-form-item",{attrs:{label:"相关活动",prop:"activityId"}},[n("el-switch",{model:{value:a.createForm.activityId,callback:function(t){a.$set(a.createForm,"activityId",t)},expression:"createForm.activityId"}})],1),a._v(" "),a.createForm.activityId?n("el-form-item",[n("el-select",{attrs:{filterable:"",multiple:"",remote:"","reserve-keyword":"",placeholder:"请输入活动标题","remote-method":a.remoteMethod,loading:a.loading},model:{value:a.createForm.selected,callback:function(t){a.$set(a.createForm,"selected",t)},expression:"createForm.selected"}},a._l(a.activityList,function(t){return n("el-option",{key:t.id,attrs:{label:t.value,value:t}})}))],1):a._e()],1),a._v(" "),n("div",{staticClass:"sc-top-attach"},[n("el-button",{attrs:{type:"primary"},on:{click:a.handleSubmit}},[a._v("提交")])],1)],1)],1)};a._withStripped=!0;var n=r(56),d=r.n(n),i=r(5),c=r.n(i),o=r(195),S=r.n(o),u=r(176),s=r.n(u),l=r(151),m=r(153),M=(r(152),r(196)),g={computed:{uploadUrl:function(){return m.c+"/admin/group/goUpload"}},components:{Cropper:r(158).a},data:function(){return{activityList:[],loading:!1,options:M.regionData,checkList:[],editor:null,createForm:{tag:"联合国",editorContent:null,title:null,imageUrl:null,author:null,newsTag:0,link:null,selected:[]},operatorId:null,tagList:[],rules:{title:[{required:!0,message:"请输入标题",trigger:["change","blur"]}],author:[{required:!0,message:"请输入署名作者",trigger:["change","blur"]}],link:[{required:!0,message:"请输入网页链接",trigger:["change","blur"]}],area:[{required:!0,message:"请选择地区",trigger:["change","blur"]}],address:[{required:!0,message:"请输入地址",trigger:["change","blur"]}],lng:[{required:!0,message:"请输入经度",trigger:["change","blur"]}],lat:[{required:!0,message:"请输入纬度",trigger:["change","blur"]}],imageUrl:[{required:!0,message:"请上传图片",trigger:["change","blur"]}]}}},mounted:function(){var e=this;this.editor=new s.a(this.$refs.editor),this.editor.customConfig.onchange=function(t){e.createForm.editorContent=t},this.editor.customConfig.uploadImgServer=m.c+"/admin/produce/wangUpload",this.editor.customConfig.uploadFileName="file",this.editor.customConfig.zIndex=100,this.editor.customConfig.uploadImgHooks={customInsert:function(t,e,r){t(e.data[0].url)}},this.editor.create(),this.getList(),this.getTag()},methods:{remoteMethod:function(t){var e=this;if(""!==t){this.loading=!0;var r={state:t};Object(l.K)(r).then(function(t){e.activityList=t.data.activtylist,e.loading=!1})}else this.activityList=[]},getTag:function(){var e=this,t={type:this.$route.query.type};Object(l.A)(t).then(function(t){e.tagList=t.data.tags})},getList:function(){var L=this,t=this.$route.query.id;if(t){var e={id:t};Object(l.q)(e).then(function(t){var e=t.data.news,r=e.address,a=e.area,n=e.pic1,i=e.lat,o=e.level,u=e.lng,s=e.tip,d=e.title,c=e.createat,l=t.data.article,m=l.content,g=l.url,p=l.contenttype,f=l.author;L.activityList=t.data.relation;var h=M.TextToCode[a.split(",")[0]].code,v=M.TextToCode[a.split(",")[0]][a.split(",")[1]].code,y=M.TextToCode[a.split(",")[0]][a.split(",")[1]][a.split(",")[2]].code;L.createForm={editorContent:m,title:d,imageUrl:n,author:f,newsTag:p,link:g,address:r,lat:i,lng:u,tag:o,activityId:0<L.activityList.length,dateValue:1e3*c,selected:L.activityList,area:[h,v,y]},L.editor.txt.html(m);var b=JSON.parse(s);if(!b)return!1;var w=!0,_=!1,F=void 0;try{for(var k,C=S()(b);!(w=(k=C.next()).done);w=!0){var x=k.value,I=x.tagName.split(",");for(var T in I)L.checkList.push(x.className+","+I[T])}}catch(t){_=!0,F=t}finally{try{!w&&C.return&&C.return()}finally{if(_)throw F}}})}},handleAvatarSuccess:function(t,e){this.createForm.imageUrl=m.b+t.data.url},imageuploadedError:function(t){this.$message({type:"error",message:t})},handleSubmit:function(){var s=this;this.$refs.form.validate(function(t){if(t){for(var e=[M.CodeToText[s.createForm.area[0]],M.CodeToText[s.createForm.area[1]],M.CodeToText[s.createForm.area[2]]],r=s.tagList.map(function(t){return{className:t.className}}),a=0;a<r.length;a++)for(var n=0;n<s.checkList.length;n++){var i=s.checkList[n].split(",")[0],o=s.checkList[n].split(",")[1];r[a].className===i&&(r[a].tagName?r[a].tagName=r[a].tagName+","+o:r[a].tagName=o)}var u=c()({},s.createForm,{id:s.$route.query.id,type:s.$route.query.type,area:e,dateValue:s.createForm.dateValue,checkList:s.checkList.length?d()(r):[]});s.$route.query.id?Object(l.s)(u).then(function(t){s.$message({type:"success",message:"编辑成功"}),s.$router.push({name:"produce",params:{activeName:s.$route.query.type}})}):Object(l.V)(u).then(function(t){s.$message({type:"success",message:"添加成功"}),s.$router.push({name:"produce",params:{activeName:s.$route.query.type}})})}})}}},p=(r(250),r(1)),f=Object(p.a)(g,a,[],!1,null,null,null);f.options.__file="src/views/edit/produceNew.vue";e.default=f.exports}}]);