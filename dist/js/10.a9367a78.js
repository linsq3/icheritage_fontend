(window.webpackJsonp=window.webpackJsonp||[]).push([[10,4],{151:function(t,e,n){"use strict";var r=n(154),a=n.n(r),i=n(5),o=n.n(i),u=n(53),d=n(155),s=n.n(d),c=function(t){return"GET"===t.method.toUpperCase()&&(t.params=t.data),s()(o()({},t,{baseURL:"http://beastsclub.cn/icheritage/web/app_dev.php/"})).then(function(t){return t.data&&0==t.data.code?t.data:5005!==t.data.code?(u.Message.error(t.data.msg),a.a.reject(t.data)):(u.Message.error(t.data.msg),void(window.location.href="/#/login"))})},l=n(150),m=n.n(l),g=function(t){return c({url:"/login",data:m.a.stringify(t),method:"post"})},f=function(t){return c({url:"/logout",data:m.a.stringify(t),method:"post"})},p=function(t){return c({url:"/admin/user/",data:t,method:"get"})},h=function(t){return c({url:"/admin/user/register",data:m.a.stringify(t),method:"post"})},v=function(t){return c({url:"/admin/user/user_update",data:m.a.stringify(t),method:"post"})},y=function(t){return c({url:"/admin/user/unlock",data:m.a.stringify(t),method:"post"})},b=function(t){return c({url:"/admin/user/lock",data:m.a.stringify(t),method:"post"})},w=function(t){return c({url:"/admin/user/changepwd",data:m.a.stringify(t),method:"post"})},C=function(t){return c({url:"/admin/user/resetPwd",data:m.a.stringify(t),method:"post"})},I=function(t){return c({url:"/admin/menu/list",data:t,method:"get"})},_=function(t){return c({url:"/admin/menu/new",data:m.a.stringify(t),method:"post"})},x=function(t){return c({url:"/admin/menu/edit",data:m.a.stringify(t),method:"post"})},k=function(t){return c({url:"/admin/menu/del",data:m.a.stringify(t),method:"post"})},F=function(t){return c({url:"/admin/tag/list",data:t,method:"get"})},S=function(t){return c({url:"/admin/tag/new",data:m.a.stringify(t),method:"post"})},M=function(t){return c({url:"/admin/tag/edit",data:m.a.stringify(t),method:"post"})},U=function(t){return c({url:"/admin/tag/del",data:m.a.stringify(t),method:"post"})},T=function(t){return c({url:"/admin/search/list",data:t,method:"get"})},R=function(t){return c({url:"/admin/search/new",data:m.a.stringify(t),method:"post"})},D=function(t){return c({url:"/admin/search/edit",data:m.a.stringify(t),method:"post"})},O=function(t){return c({url:"/admin/search/del",data:m.a.stringify(t),method:"post"})},$=function(t){return c({url:"/admin/webuser/list",data:t,method:"get"})},j=function(t){return c({url:"/admin/webuser/agree",data:m.a.stringify(t),method:"post"})},L=function(t){return c({url:"/admin/webuser/refused",data:m.a.stringify(t),method:"post"})},E=function(t){return c({url:"/admin/comment/list",data:t,method:"get"})},H=function(t){return c({url:"/admin/comment/agree",data:m.a.stringify(t),method:"post"})},A=function(t){return c({url:"/admin/comment/refused",data:m.a.stringify(t),method:"post"})},z=function(t){return c({url:"/admin/startpage/list",data:t,method:"get"})},q=function(t){return c({url:"/admin/startpage/startpage_new",data:m.a.stringify(t),method:"post"})},G=function(t){return c({url:"/admin/startpage/startpage_update",data:m.a.stringify(t),method:"post"})},P=function(t){return c({url:"/admin/startpage/shelve",data:m.a.stringify(t),method:"post"})},V=function(t){return c({url:"/admin/startpage/offshelve",data:m.a.stringify(t),method:"post"})},B=function(t){return c({url:"/admin/startpage/startpage_imglist",data:t,method:"get"})},N=function(t){return c({url:"/admin/startpage/startpage_img_new",data:m.a.stringify(t),method:"post"})},J=function(t){return c({url:"/admin/startpage/startpage_img_edit",data:m.a.stringify(t),method:"post"})},Y=function(t){return c({url:"/admin/startpage/startpage_img_del",data:m.a.stringify(t),method:"post"})},X=function(t){return c({url:"/admin/focus/",data:t,method:"get"})},W=function(t){return c({url:"/admin/focus/new",data:m.a.stringify(t),method:"post"})},Z=function(t){return c({url:"/admin/focus/edit",data:m.a.stringify(t),method:"post"})},K=function(t){return c({url:"/admin/focus/del",data:m.a.stringify(t),method:"post"})},Q=function(t){return c({url:"/admin/focus/sort",data:m.a.stringify(t),method:"post"})},tt=function(t){return c({url:"/admin/focus/recover",data:m.a.stringify(t),method:"post"})},et=function(t){return c({url:"/admin/group/list",data:t,method:"get"})},nt=function(t){return c({url:"/admin/group/new",data:m.a.stringify(t),method:"post"})},rt=function(t){return c({url:"/admin/group/edit",data:m.a.stringify(t),method:"post"})},at=function(t){return c({url:"/admin/group/del",data:m.a.stringify(t),method:"post"})},it=function(t){return c({url:"/admin/group/sort",data:m.a.stringify(t),method:"post"})},ot=function(t){return c({url:"/admin/group/recover",data:m.a.stringify(t),method:"post"})},ut=function(t){return c({url:"/admin/group/agree",data:m.a.stringify(t),method:"post"})},dt=function(t){return c({url:"/admin/group/view",data:t,method:"get"})},st=function(t){return c({url:"/admin/activity/list",data:t,method:"get"})},ct=function(t){return c({url:"/admin/activity/new",data:m.a.stringify(t),method:"post"})},lt=function(t){return c({url:"/admin/activity/edit",data:m.a.stringify(t),method:"post"})},mt=function(t){return c({url:"/admin/activity/del",data:m.a.stringify(t),method:"post"})},gt=function(t){return c({url:"/admin/activity/sort",data:m.a.stringify(t),method:"post"})},ft=function(t){return c({url:"/admin/activity/recover",data:m.a.stringify(t),method:"post"})},pt=function(t){return c({url:"/admin/activity/tag",data:t,method:"get"})},ht=function(t){return c({url:"/admin/activity/edit/info",data:t,method:"get"})},vt=function(t){return c({url:"/admin/produce/menu",data:t,method:"get"})},yt=function(t){return c({url:"/admin/produce/list",data:t,method:"get"})},bt=function(t){return c({url:"/admin/produce/del",data:t,method:"post"})},wt=function(t){return c({url:"/admin/produce/new",data:t,method:"post"})},Ct=function(t){return c({url:"/admin/produce/edit",data:t,method:"post"})},It=function(t){return c({url:"/admin/produce/edit/info",data:t,method:"get"})},_t=function(t){return c({url:"/admin/produce/recover",data:t,method:"post"})},xt=function(t){return c({url:"/admin/activity/state",data:t,method:"get"})};n.d(e,"O",function(){return g}),n.d(e,"P",function(){return f}),n.d(e,"x",function(){return p}),n.d(e,"m",function(){return v}),n.d(e,"kb",function(){return y}),n.d(e,"N",function(){return b}),n.d(e,"b",function(){return w}),n.d(e,"Q",function(){return h}),n.d(e,"fb",function(){return C}),n.d(e,"E",function(){return I}),n.d(e,"U",function(){return _}),n.d(e,"r",function(){return x}),n.d(e,"h",function(){return k}),n.d(e,"L",function(){return F}),n.d(e,"Z",function(){return S}),n.d(e,"w",function(){return M}),n.d(e,"l",function(){return U}),n.d(e,"H",function(){return T}),n.d(e,"W",function(){return R}),n.d(e,"t",function(){return D}),n.d(e,"j",function(){return O}),n.d(e,"M",function(){return $}),n.d(e,"lb",function(){return j}),n.d(e,"mb",function(){return L}),n.d(e,"B",function(){return E}),n.d(e,"c",function(){return H}),n.d(e,"d",function(){return A}),n.d(e,"J",function(){return z}),n.d(e,"Y",function(){return q}),n.d(e,"v",function(){return G}),n.d(e,"gb",function(){return P}),n.d(e,"ab",function(){return V}),n.d(e,"I",function(){return B}),n.d(e,"X",function(){return N}),n.d(e,"u",function(){return J}),n.d(e,"k",function(){return Y}),n.d(e,"C",function(){return X}),n.d(e,"S",function(){return W}),n.d(e,"o",function(){return Z}),n.d(e,"f",function(){return K}),n.d(e,"ib",function(){return Q}),n.d(e,"cb",function(){return tt}),n.d(e,"D",function(){return et}),n.d(e,"T",function(){return nt}),n.d(e,"p",function(){return rt}),n.d(e,"g",function(){return at}),n.d(e,"jb",function(){return it}),n.d(e,"db",function(){return ot}),n.d(e,"a",function(){return ut}),n.d(e,"nb",function(){return dt}),n.d(e,"y",function(){return st}),n.d(e,"R",function(){return ct}),n.d(e,"n",function(){return lt}),n.d(e,"e",function(){return mt}),n.d(e,"hb",function(){return gt}),n.d(e,"bb",function(){return ft}),n.d(e,"A",function(){return pt}),n.d(e,"z",function(){return ht}),n.d(e,"G",function(){return vt}),n.d(e,"F",function(){return yt}),n.d(e,"i",function(){return bt}),n.d(e,"eb",function(){return _t}),n.d(e,"K",function(){return xt}),n.d(e,"V",function(){return wt}),n.d(e,"s",function(){return Ct}),n.d(e,"q",function(){return It})},152:function(t,e,n){"use strict";var r={checkAuth:function(t){var e=localStorage.getItem("isTenantAdmin"),n=localStorage.getItem("ms_userRight");return!parseInt(e)&&!(n&&-1<n.indexOf(t))},timeAddZero:function(t){return t<10?"0"+t:""+t},dateFormat:function(t,e){if(t&&e){var n=t.getFullYear(),r=t.getMonth()<9?"0"+parseInt(t.getMonth()+1):t.getMonth()+1,a=t.getDate()<10?"0"+t.getDate():t.getDate(),i=t.getHours()<10?"0"+t.getHours():t.getHours(),o=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),u=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();switch(e){case"yy-mm-dd h:m:s":return n+"-"+r+"-"+a+" "+i+":"+o+":"+u;case"yy-mm-dd h:m":return n+"-"+r+"-"+a+" "+i+":"+o;case"yy-mm-dd":return n+"-"+r+"-"+a;case"mm-dd h:m":return r+"-"+a+" "+i+":"+o;case"mm-dd":return r+"-"+a;case"h:m":return i+":"+o;case"h:m:s":return i+":"+o+":"+u;case"HH:mm MM/dd/yyyy":return i+":"+o+" "+r+"/"+a+"/"+n;case"mm-dd d":return r+"月"+a+" "+["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][t.getDay()]}}},getDate:function(t,e){if(t&&e){var n=(t=new Date(1e3*t)).getFullYear(),r=t.getMonth()<9?"0"+parseInt(t.getMonth()+1):t.getMonth()+1,a=t.getDate()<10?"0"+t.getDate():t.getDate();switch(e){case"yy-mm-dd":return n+"-"+r+"-"+a}}},getTime:function(t,e){if(t&&e){var n=(t=new Date(1e3*t)).getFullYear(),r=t.getMonth()<9?"0"+parseInt(t.getMonth()+1):t.getMonth()+1,a=t.getDate()<10?"0"+t.getDate():t.getDate(),i=t.getHours()<10?"0"+t.getHours():t.getHours(),o=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),u=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();switch(e){case"yy-mm-dd h:m:s":return n+"-"+r+"-"+a+" "+i+":"+o+":"+u}}},getTimestamp:function(t){if(t)return t.getTime()},getSeconds:function(t){if(t)return 60*t.getHours()*60+60*t.getMinutes()+t.getSeconds()},copyText:function(t){var e=document.createRange();e.selectNode(t);var n=window.getSelection();0<n.rangeCount&&n.removeAllRanges(),n.addRange(e),document.execCommand("Copy")},setCookie:function(t,e,n){var r=new Date;r.setTime(r.getTime()+60*n*60*1e3),document.cookie=t+"="+escape(e)+(null==n?"":";expires="+r.toGMTString())},getCookie:function(t){if(0<document.cookie.length){var e=document.cookie.indexOf(t+"=");if(-1!=e){e=e+t.length+1;var n=document.cookie.indexOf(";",e);return-1==n&&(n=document.cookie.length),unescape(document.cookie.substring(e,n))}}return""},delCookie:function(t){var e=new Date;e.setTime(e.getTime()-1);var n=this.getCookie(t);null!=n&&(document.cookie=t+"="+n+";expires="+e.toGMTString())}};e.a=r},153:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return a}),n.d(e,"c",function(){return i});var r="http://beastsclub.cn/icheritage/web/",a="http://beastsclub.cn",i="http://beastsclub.cn/icheritage/web/app_dev.php"},156:function(t,e,n){},158:function(t,e,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("div",[e.inputShow?n("input",{attrs:{type:"file",id:"change",accept:"image"},on:{change:e.change}}):e._e()])]),e._v(" "),n("el-dialog",{staticClass:"ui-dialog-min",staticStyle:{"line-height":"0","text-align":"left"},attrs:{id:e.dialogId,"append-to-body":"",title:"裁剪",visible:e.panel,"close-on-click-modal":!1},on:{open:e.dialogOpen,close:e.diaglogClose,"update:visible":function(t){e.panel=t}}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("div",{staticClass:"avatar-wrapper"},[n("img",{attrs:{id:e.picId,src:e.url,alt:"Picture"}})])])],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"btn-1",on:{click:function(t){e.panel=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{staticClass:"btn-2",attrs:{type:"primary"},on:{click:e.crop}},[e._v("确 定")])],1)],1)],1)};r._withStripped=!0;var a=n(160),i={props:["aspectRatio","data","uploadUrl","extensions","maxFileSize"],data:function(){return{picValue:"",picId:"image",dialogId:"dialogId",cropper:"",croppable:!1,panel:!1,inputShow:!0,url:"",cropArgs:{toCropImgH:"",toCropImgW:"",toCropImgX:"",toCropImgY:""}}},mounted:function(){this.picId="image"+Math.random(),this.dialogId="dialogId"+Math.random()},methods:{getObjectURL:function(t){var e=null;return null!=window.createObjectURL?e=window.createObjectURL(t):null!=window.URL?e=window.URL.createObjectURL(t):null!=window.webkitURL&&(e=window.webkitURL.createObjectURL(t)),e},change:function(t){var e=t.target.files||t.dataTransfer.files;if(e.length){if(this.picValue=e[0],""!=this.extensions&&null!=this.extensions){for(var n=this.extensions.split(","),r=0,a=0;a<n.length;a++)-1<this.picValue.type.indexOf(n[a])&&r++;if(0==r)return t.target.value="",void this.$emit("imageuploadedError","只允许上传"+this.extensions)}if(""!=this.maxFileSize&&null!=this.maxFileSize&&this.picValue.size>this.maxFileSize)return t.target.value="",void this.$emit("imageuploadedError","只允许上传小于"+this.maxFileSize/1024/1024+"M的图片");this.panel=!0,this.url=this.getObjectURL(this.picValue),this.inputShow=!1}},crop:function(){var t;this.panel=!1,this.croppable&&(t=this.cropper.getCroppedCanvas(),this.picValue=this.dataURItoBlob(t.toDataURL()),this.cropArgs={toCropImgH:parseInt(this.cropper.getData().height),toCropImgW:parseInt(this.cropper.getData().width),toCropImgX:parseInt(this.cropper.getData().x),toCropImgY:parseInt(this.cropper.getData().y)},this.postImg())},dataURItoBlob:function(t){for(var e=atob(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(e.length),a=new Uint8Array(r),i=0;i<e.length;i++)a[i]=e.charCodeAt(i);return new Blob([r],{type:n})},getRoundedCanvas:function(t){var e=document.createElement("canvas"),n=e.getContext("2d"),r=t.width,a=t.height;return e.width=r,e.height=a,n.imageSmoothingEnabled=!0,n.drawImage(t,0,0,r,a),n.globalCompositeOperation="destination-in",n.beginPath(),n.arc(r/2,a/2,Math.min(r,a)/2,0,2*Math.PI,!0),n.fill(),e},postImg:function(){var t=this,e=new FormData;e.append("files",this.picValue);var n=new XMLHttpRequest;n.open("post",this.uploadUrl),n.send(e),n.onload=function(){t.inputShow=!0,t.$emit("imageuploaded",JSON.parse(n.responseText))}},diaglogClose:function(){this.inputShow=!0;var t=document.getElementById(this.dialogId);document.body.removeChild(t)},dialogOpen:function(){var e=this;this.cropper?this.cropper.replace(this.url):this.$nextTick(function(){var t=document.getElementById(this.picId);this.cropper=new a.a(t,{aspectRatio:e.aspectRatio,viewMode:1,background:!1,zoomable:!0,ready:function(){e.croppable=!0}})})}}},o=(n(159),n(1)),u=Object(o.a)(i,r,[],!1,null,null,null);u.options.__file="src/views/cropper.vue";e.a=u.exports},159:function(t,e,n){"use strict";var r=n(156);n.n(r).a},177:function(t,e,n){},244:function(t,e,n){"use strict";var r=n(177);n.n(r).a},266:function(t,e,n){"use strict";n.r(e);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",[n("el-form",{ref:"form",attrs:{rules:e.rules,model:e.createForm,"label-width":"80px"}},[n("el-card",{staticClass:"box-card"},[n("el-form-item",{attrs:{label:"标题",prop:"title"}},[n("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.createForm.title,callback:function(t){e.$set(e.createForm,"title",t)},expression:"createForm.title"}})],1),e._v(" "),n("el-form-item",{staticClass:"focus",attrs:{label:"图标",prop:"imageUrl"}},[n("div",{staticClass:"avatar-uploader"},[n("div",{staticClass:"avatar-uploader"},[n("div",{staticClass:"el-upload el-upload--text"},[n("keep-alive",[n("Cropper",{ref:"imgCrop",attrs:{uploadUrl:e.uploadUrl,maxFileSize:2097152,extensions:"png,gif,jpeg,jpg",aspectRatio:16/9},on:{imageuploaded:e.handleAvatarSuccess,imageuploadedError:e.imageuploadedError}})],1),e._v(" "),e.createForm.imageUrl?n("img",{staticClass:"avatar",attrs:{src:e.createForm.imageUrl}}):n("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)])]),e._v(" "),n("div",{staticClass:"tips"},[e._v("请上传2M以内的JPG/JPEG/PNG/GIF图片")])])],1),e._v(" "),n("el-card",{staticClass:"box-card"},[n("el-form-item",{attrs:{label:"新闻类型",prop:"newsTag"}},[n("el-radio-group",{model:{value:e.createForm.newsTag,callback:function(t){e.$set(e.createForm,"newsTag",t)},expression:"createForm.newsTag"}},[n("el-radio",{attrs:{label:0}},[e._v("普通新闻")]),e._v(" "),n("el-radio",{attrs:{label:1}},[e._v("网页新闻")])],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"署名作者",prop:"author"}},[n("el-input",{attrs:{placeholder:"请输入署名作者"},model:{value:e.createForm.author,callback:function(t){e.$set(e.createForm,"author",t)},expression:"createForm.author"}})],1),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==e.createForm.newsTag,expression:"createForm.newsTag == 0"}],attrs:{label:"正文内容",prop:"editorContent"}},[n("div",{ref:"editor",staticStyle:{"text-align":"left"}})]),e._v(" "),1==e.createForm.newsTag?n("el-form-item",{attrs:{label:"正文内容",prop:"link"}},[n("el-input",{attrs:{placeholder:"请输入网页链接"},model:{value:e.createForm.link,callback:function(t){e.$set(e.createForm,"link",t)},expression:"createForm.link"}})],1):e._e()],1),e._v(" "),n("div",{staticClass:"sc-top-attach"},[n("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)],1)};r._withStripped=!0;var a=n(5),i=n.n(a),o=n(176),u=n.n(o),d=n(151),s=n(153),c=(n(152),{computed:{uploadUrl:function(){return s.c+"/admin/group/goUpload"}},components:{Cropper:n(158).a},data:function(){return{editor:null,createForm:{editorContent:null,title:null,imageUrl:null,author:null,newsTag:0,link:null},operatorId:null,rules:{title:[{required:!0,message:"请输入标题",trigger:["change","blur"]}],author:[{required:!0,message:"请输入署名作者",trigger:["change","blur"]}],link:[{required:!0,message:"请输入网页链接",trigger:["change","blur"]}],imageUrl:[{required:!0,message:"请上传图片",trigger:["change","blur"]}]}}},mounted:function(){var e=this;this.editor=new u.a(this.$refs.editor),this.editor.customConfig.onchange=function(t){e.createForm.editorContent=t},this.editor.customConfig.uploadImgServer=s.c+"/admin/produce/wangUpload",this.editor.customConfig.uploadFileName="file",this.editor.customConfig.zIndex=100,this.editor.customConfig.uploadImgHooks={customInsert:function(t,e,n){t(e.data[0].url)}},this.editor.create(),this.getList()},methods:{getList:function(){var s=this,t=this.$route.query.id;if(t){var e={id:t};Object(d.nb)(e).then(function(t){var e=t.data.group,n=e.title,r=e.pic1,a=e.author,i=t.data.article,o=i.content,u=i.url,d=i.contenttype;s.createForm={editorContent:o,title:n,imageUrl:r,author:a,newsTag:d,link:u},s.editor.txt.html(o)})}},handleAvatarSuccess:function(t,e){this.createForm.imageUrl=s.b+t.data.url},imageuploadedError:function(t){this.$message({type:"error",message:t})},handleSubmit:function(){var n=this;this.$refs.form.validate(function(t){if(t){var e=i()({},n.createForm,{id:n.$route.query.id});n.$route.query.id?Object(d.p)(e).then(function(t){n.$message({type:"success",message:"编辑成功"}),n.$router.push({name:"group"})}):Object(d.T)(e).then(function(t){n.$message({type:"success",message:"添加成功"}),n.$router.push({name:"group"})})}})}}}),l=(n(244),n(1)),m=Object(l.a)(c,r,[],!1,null,null,null);m.options.__file="src/views/edit/groupNew.vue";e.default=m.exports}}]);