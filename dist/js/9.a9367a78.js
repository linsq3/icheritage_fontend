(window.webpackJsonp=window.webpackJsonp||[]).push([[9,4],{151:function(t,e,r){"use strict";var n=r(154),a=r.n(n),i=r(5),o=r.n(i),u=r(53),s=r(155),l=r.n(s),c=function(t){return"GET"===t.method.toUpperCase()&&(t.params=t.data),l()(o()({},t,{baseURL:"http://beastsclub.cn/icheritage/web/app_dev.php/"})).then(function(t){return t.data&&0==t.data.code?t.data:5005!==t.data.code?(u.Message.error(t.data.msg),a.a.reject(t.data)):(u.Message.error(t.data.msg),void(window.location.href="/#/login"))})},d=r(150),m=r.n(d),p=function(t){return c({url:"/login",data:m.a.stringify(t),method:"post"})},g=function(t){return c({url:"/logout",data:m.a.stringify(t),method:"post"})},f=function(t){return c({url:"/admin/user/",data:t,method:"get"})},h=function(t){return c({url:"/admin/user/register",data:m.a.stringify(t),method:"post"})},v=function(t){return c({url:"/admin/user/user_update",data:m.a.stringify(t),method:"post"})},b=function(t){return c({url:"/admin/user/unlock",data:m.a.stringify(t),method:"post"})},y=function(t){return c({url:"/admin/user/lock",data:m.a.stringify(t),method:"post"})},w=function(t){return c({url:"/admin/user/changepwd",data:m.a.stringify(t),method:"post"})},k=function(t){return c({url:"/admin/user/resetPwd",data:m.a.stringify(t),method:"post"})},x=function(t){return c({url:"/admin/menu/list",data:t,method:"get"})},_=function(t){return c({url:"/admin/menu/new",data:m.a.stringify(t),method:"post"})},C=function(t){return c({url:"/admin/menu/edit",data:m.a.stringify(t),method:"post"})},F=function(t){return c({url:"/admin/menu/del",data:m.a.stringify(t),method:"post"})},I=function(t){return c({url:"/admin/tag/list",data:t,method:"get"})},$=function(t){return c({url:"/admin/tag/new",data:m.a.stringify(t),method:"post"})},S=function(t){return c({url:"/admin/tag/edit",data:m.a.stringify(t),method:"post"})},T=function(t){return c({url:"/admin/tag/del",data:m.a.stringify(t),method:"post"})},q=function(t){return c({url:"/admin/search/list",data:t,method:"get"})},M=function(t){return c({url:"/admin/search/new",data:m.a.stringify(t),method:"post"})},U=function(t){return c({url:"/admin/search/edit",data:m.a.stringify(t),method:"post"})},L=function(t){return c({url:"/admin/search/del",data:m.a.stringify(t),method:"post"})},N=function(t){return c({url:"/admin/webuser/list",data:t,method:"get"})},R=function(t){return c({url:"/admin/webuser/agree",data:m.a.stringify(t),method:"post"})},D=function(t){return c({url:"/admin/webuser/refused",data:m.a.stringify(t),method:"post"})},O=function(t){return c({url:"/admin/comment/list",data:t,method:"get"})},A=function(t){return c({url:"/admin/comment/agree",data:m.a.stringify(t),method:"post"})},P=function(t){return c({url:"/admin/comment/refused",data:m.a.stringify(t),method:"post"})},j=function(t){return c({url:"/admin/startpage/list",data:t,method:"get"})},E=function(t){return c({url:"/admin/startpage/startpage_new",data:m.a.stringify(t),method:"post"})},H=function(t){return c({url:"/admin/startpage/startpage_update",data:m.a.stringify(t),method:"post"})},z=function(t){return c({url:"/admin/startpage/shelve",data:m.a.stringify(t),method:"post"})},J=function(t){return c({url:"/admin/startpage/offshelve",data:m.a.stringify(t),method:"post"})},G=function(t){return c({url:"/admin/startpage/startpage_imglist",data:t,method:"get"})},V=function(t){return c({url:"/admin/startpage/startpage_img_new",data:m.a.stringify(t),method:"post"})},B=function(t){return c({url:"/admin/startpage/startpage_img_edit",data:m.a.stringify(t),method:"post"})},Y=function(t){return c({url:"/admin/startpage/startpage_img_del",data:m.a.stringify(t),method:"post"})},X=function(t){return c({url:"/admin/focus/",data:t,method:"get"})},W=function(t){return c({url:"/admin/focus/new",data:m.a.stringify(t),method:"post"})},Z=function(t){return c({url:"/admin/focus/edit",data:m.a.stringify(t),method:"post"})},K=function(t){return c({url:"/admin/focus/del",data:m.a.stringify(t),method:"post"})},Q=function(t){return c({url:"/admin/focus/sort",data:m.a.stringify(t),method:"post"})},tt=function(t){return c({url:"/admin/focus/recover",data:m.a.stringify(t),method:"post"})},et=function(t){return c({url:"/admin/group/list",data:t,method:"get"})},rt=function(t){return c({url:"/admin/group/new",data:m.a.stringify(t),method:"post"})},nt=function(t){return c({url:"/admin/group/edit",data:m.a.stringify(t),method:"post"})},at=function(t){return c({url:"/admin/group/del",data:m.a.stringify(t),method:"post"})},it=function(t){return c({url:"/admin/group/sort",data:m.a.stringify(t),method:"post"})},ot=function(t){return c({url:"/admin/group/recover",data:m.a.stringify(t),method:"post"})},ut=function(t){return c({url:"/admin/group/agree",data:m.a.stringify(t),method:"post"})},st=function(t){return c({url:"/admin/group/view",data:t,method:"get"})},lt=function(t){return c({url:"/admin/activity/list",data:t,method:"get"})},ct=function(t){return c({url:"/admin/activity/new",data:m.a.stringify(t),method:"post"})},dt=function(t){return c({url:"/admin/activity/edit",data:m.a.stringify(t),method:"post"})},mt=function(t){return c({url:"/admin/activity/del",data:m.a.stringify(t),method:"post"})},pt=function(t){return c({url:"/admin/activity/sort",data:m.a.stringify(t),method:"post"})},gt=function(t){return c({url:"/admin/activity/recover",data:m.a.stringify(t),method:"post"})},ft=function(t){return c({url:"/admin/activity/tag",data:t,method:"get"})},ht=function(t){return c({url:"/admin/activity/edit/info",data:t,method:"get"})},vt=function(t){return c({url:"/admin/produce/menu",data:t,method:"get"})},bt=function(t){return c({url:"/admin/produce/list",data:t,method:"get"})},yt=function(t){return c({url:"/admin/produce/del",data:t,method:"post"})},wt=function(t){return c({url:"/admin/produce/new",data:t,method:"post"})},kt=function(t){return c({url:"/admin/produce/edit",data:t,method:"post"})},xt=function(t){return c({url:"/admin/produce/edit/info",data:t,method:"get"})},_t=function(t){return c({url:"/admin/produce/recover",data:t,method:"post"})},Ct=function(t){return c({url:"/admin/activity/state",data:t,method:"get"})};r.d(e,"O",function(){return p}),r.d(e,"P",function(){return g}),r.d(e,"x",function(){return f}),r.d(e,"m",function(){return v}),r.d(e,"kb",function(){return b}),r.d(e,"N",function(){return y}),r.d(e,"b",function(){return w}),r.d(e,"Q",function(){return h}),r.d(e,"fb",function(){return k}),r.d(e,"E",function(){return x}),r.d(e,"U",function(){return _}),r.d(e,"r",function(){return C}),r.d(e,"h",function(){return F}),r.d(e,"L",function(){return I}),r.d(e,"Z",function(){return $}),r.d(e,"w",function(){return S}),r.d(e,"l",function(){return T}),r.d(e,"H",function(){return q}),r.d(e,"W",function(){return M}),r.d(e,"t",function(){return U}),r.d(e,"j",function(){return L}),r.d(e,"M",function(){return N}),r.d(e,"lb",function(){return R}),r.d(e,"mb",function(){return D}),r.d(e,"B",function(){return O}),r.d(e,"c",function(){return A}),r.d(e,"d",function(){return P}),r.d(e,"J",function(){return j}),r.d(e,"Y",function(){return E}),r.d(e,"v",function(){return H}),r.d(e,"gb",function(){return z}),r.d(e,"ab",function(){return J}),r.d(e,"I",function(){return G}),r.d(e,"X",function(){return V}),r.d(e,"u",function(){return B}),r.d(e,"k",function(){return Y}),r.d(e,"C",function(){return X}),r.d(e,"S",function(){return W}),r.d(e,"o",function(){return Z}),r.d(e,"f",function(){return K}),r.d(e,"ib",function(){return Q}),r.d(e,"cb",function(){return tt}),r.d(e,"D",function(){return et}),r.d(e,"T",function(){return rt}),r.d(e,"p",function(){return nt}),r.d(e,"g",function(){return at}),r.d(e,"jb",function(){return it}),r.d(e,"db",function(){return ot}),r.d(e,"a",function(){return ut}),r.d(e,"nb",function(){return st}),r.d(e,"y",function(){return lt}),r.d(e,"R",function(){return ct}),r.d(e,"n",function(){return dt}),r.d(e,"e",function(){return mt}),r.d(e,"hb",function(){return pt}),r.d(e,"bb",function(){return gt}),r.d(e,"A",function(){return ft}),r.d(e,"z",function(){return ht}),r.d(e,"G",function(){return vt}),r.d(e,"F",function(){return bt}),r.d(e,"i",function(){return yt}),r.d(e,"eb",function(){return _t}),r.d(e,"K",function(){return Ct}),r.d(e,"V",function(){return wt}),r.d(e,"s",function(){return kt}),r.d(e,"q",function(){return xt})},152:function(t,e,r){"use strict";var n={checkAuth:function(t){var e=localStorage.getItem("isTenantAdmin"),r=localStorage.getItem("ms_userRight");return!parseInt(e)&&!(r&&-1<r.indexOf(t))},timeAddZero:function(t){return t<10?"0"+t:""+t},dateFormat:function(t,e){if(t&&e){var r=t.getFullYear(),n=t.getMonth()<9?"0"+parseInt(t.getMonth()+1):t.getMonth()+1,a=t.getDate()<10?"0"+t.getDate():t.getDate(),i=t.getHours()<10?"0"+t.getHours():t.getHours(),o=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),u=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();switch(e){case"yy-mm-dd h:m:s":return r+"-"+n+"-"+a+" "+i+":"+o+":"+u;case"yy-mm-dd h:m":return r+"-"+n+"-"+a+" "+i+":"+o;case"yy-mm-dd":return r+"-"+n+"-"+a;case"mm-dd h:m":return n+"-"+a+" "+i+":"+o;case"mm-dd":return n+"-"+a;case"h:m":return i+":"+o;case"h:m:s":return i+":"+o+":"+u;case"HH:mm MM/dd/yyyy":return i+":"+o+" "+n+"/"+a+"/"+r;case"mm-dd d":return n+"月"+a+" "+["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][t.getDay()]}}},getDate:function(t,e){if(t&&e){var r=(t=new Date(1e3*t)).getFullYear(),n=t.getMonth()<9?"0"+parseInt(t.getMonth()+1):t.getMonth()+1,a=t.getDate()<10?"0"+t.getDate():t.getDate();switch(e){case"yy-mm-dd":return r+"-"+n+"-"+a}}},getTime:function(t,e){if(t&&e){var r=(t=new Date(1e3*t)).getFullYear(),n=t.getMonth()<9?"0"+parseInt(t.getMonth()+1):t.getMonth()+1,a=t.getDate()<10?"0"+t.getDate():t.getDate(),i=t.getHours()<10?"0"+t.getHours():t.getHours(),o=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),u=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();switch(e){case"yy-mm-dd h:m:s":return r+"-"+n+"-"+a+" "+i+":"+o+":"+u}}},getTimestamp:function(t){if(t)return t.getTime()},getSeconds:function(t){if(t)return 60*t.getHours()*60+60*t.getMinutes()+t.getSeconds()},copyText:function(t){var e=document.createRange();e.selectNode(t);var r=window.getSelection();0<r.rangeCount&&r.removeAllRanges(),r.addRange(e),document.execCommand("Copy")},setCookie:function(t,e,r){var n=new Date;n.setTime(n.getTime()+60*r*60*1e3),document.cookie=t+"="+escape(e)+(null==r?"":";expires="+n.toGMTString())},getCookie:function(t){if(0<document.cookie.length){var e=document.cookie.indexOf(t+"=");if(-1!=e){e=e+t.length+1;var r=document.cookie.indexOf(";",e);return-1==r&&(r=document.cookie.length),unescape(document.cookie.substring(e,r))}}return""},delCookie:function(t){var e=new Date;e.setTime(e.getTime()-1);var r=this.getCookie(t);null!=r&&(document.cookie=t+"="+r+";expires="+e.toGMTString())}};e.a=n},153:function(t,e,r){"use strict";r.d(e,"b",function(){return n}),r.d(e,"a",function(){return a}),r.d(e,"c",function(){return i});var n="http://beastsclub.cn/icheritage/web/",a="http://beastsclub.cn",i="http://beastsclub.cn/icheritage/web/app_dev.php"},156:function(t,e,r){},158:function(t,e,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",[r("div",[e.inputShow?r("input",{attrs:{type:"file",id:"change",accept:"image"},on:{change:e.change}}):e._e()])]),e._v(" "),r("el-dialog",{staticClass:"ui-dialog-min",staticStyle:{"line-height":"0","text-align":"left"},attrs:{id:e.dialogId,"append-to-body":"",title:"裁剪",visible:e.panel,"close-on-click-modal":!1},on:{open:e.dialogOpen,close:e.diaglogClose,"update:visible":function(t){e.panel=t}}},[r("el-row",[r("el-col",{attrs:{span:24}},[r("div",{staticClass:"avatar-wrapper"},[r("img",{attrs:{id:e.picId,src:e.url,alt:"Picture"}})])])],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticClass:"btn-1",on:{click:function(t){e.panel=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{staticClass:"btn-2",attrs:{type:"primary"},on:{click:e.crop}},[e._v("确 定")])],1)],1)],1)};n._withStripped=!0;var a=r(160),i={props:["aspectRatio","data","uploadUrl","extensions","maxFileSize"],data:function(){return{picValue:"",picId:"image",dialogId:"dialogId",cropper:"",croppable:!1,panel:!1,inputShow:!0,url:"",cropArgs:{toCropImgH:"",toCropImgW:"",toCropImgX:"",toCropImgY:""}}},mounted:function(){this.picId="image"+Math.random(),this.dialogId="dialogId"+Math.random()},methods:{getObjectURL:function(t){var e=null;return null!=window.createObjectURL?e=window.createObjectURL(t):null!=window.URL?e=window.URL.createObjectURL(t):null!=window.webkitURL&&(e=window.webkitURL.createObjectURL(t)),e},change:function(t){var e=t.target.files||t.dataTransfer.files;if(e.length){if(this.picValue=e[0],""!=this.extensions&&null!=this.extensions){for(var r=this.extensions.split(","),n=0,a=0;a<r.length;a++)-1<this.picValue.type.indexOf(r[a])&&n++;if(0==n)return t.target.value="",void this.$emit("imageuploadedError","只允许上传"+this.extensions)}if(""!=this.maxFileSize&&null!=this.maxFileSize&&this.picValue.size>this.maxFileSize)return t.target.value="",void this.$emit("imageuploadedError","只允许上传小于"+this.maxFileSize/1024/1024+"M的图片");this.panel=!0,this.url=this.getObjectURL(this.picValue),this.inputShow=!1}},crop:function(){var t;this.panel=!1,this.croppable&&(t=this.cropper.getCroppedCanvas(),this.picValue=this.dataURItoBlob(t.toDataURL()),this.cropArgs={toCropImgH:parseInt(this.cropper.getData().height),toCropImgW:parseInt(this.cropper.getData().width),toCropImgX:parseInt(this.cropper.getData().x),toCropImgY:parseInt(this.cropper.getData().y)},this.postImg())},dataURItoBlob:function(t){for(var e=atob(t.split(",")[1]),r=t.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(e.length),a=new Uint8Array(n),i=0;i<e.length;i++)a[i]=e.charCodeAt(i);return new Blob([n],{type:r})},getRoundedCanvas:function(t){var e=document.createElement("canvas"),r=e.getContext("2d"),n=t.width,a=t.height;return e.width=n,e.height=a,r.imageSmoothingEnabled=!0,r.drawImage(t,0,0,n,a),r.globalCompositeOperation="destination-in",r.beginPath(),r.arc(n/2,a/2,Math.min(n,a)/2,0,2*Math.PI,!0),r.fill(),e},postImg:function(){var t=this,e=new FormData;e.append("files",this.picValue);var r=new XMLHttpRequest;r.open("post",this.uploadUrl),r.send(e),r.onload=function(){t.inputShow=!0,t.$emit("imageuploaded",JSON.parse(r.responseText))}},diaglogClose:function(){this.inputShow=!0;var t=document.getElementById(this.dialogId);document.body.removeChild(t)},dialogOpen:function(){var e=this;this.cropper?this.cropper.replace(this.url):this.$nextTick(function(){var t=document.getElementById(this.picId);this.cropper=new a.a(t,{aspectRatio:e.aspectRatio,viewMode:1,background:!1,zoomable:!0,ready:function(){e.croppable=!0}})})}}},o=(r(159),r(1)),u=Object(o.a)(i,n,[],!1,null,null,null);u.options.__file="src/views/cropper.vue";e.a=u.exports},159:function(t,e,r){"use strict";var n=r(156);r.n(n).a},179:function(t,e,r){},248:function(t,e,r){"use strict";var n=r(179);r.n(n).a},262:function(t,e,r){"use strict";r.r(e);var n=function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("el-row",[a("el-form",{ref:"form",attrs:{rules:n.rules,model:n.createForm,"label-width":"80px"}},[a("el-card",{staticClass:"box-card"},[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:n.createForm.title,callback:function(t){n.$set(n.createForm,"title",t)},expression:"createForm.title"}})],1),n._v(" "),a("el-form-item",{staticClass:"focus",attrs:{label:"图标",prop:"imageUrl"}},[a("div",{staticClass:"avatar-uploader"},[a("div",{staticClass:"avatar-uploader"},[a("div",{staticClass:"el-upload el-upload--text"},[a("keep-alive",[a("Cropper",{ref:"imgCrop",attrs:{uploadUrl:n.uploadUrl,maxFileSize:2097152,extensions:"png,gif,jpeg,jpg",aspectRatio:16/9},on:{imageuploaded:n.handleAvatarSuccess,imageuploadedError:n.imageuploadedError}})],1),n._v(" "),n.createForm.imageUrl?a("img",{staticClass:"avatar",attrs:{src:n.createForm.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)])]),n._v(" "),a("div",{staticClass:"tips"},[n._v("请上传2M以内的JPG/JPEG/PNG/GIF图片")])]),n._v(" "),a("el-form-item",{attrs:{label:"地区",prop:"area"}},[a("el-cascader",{attrs:{size:"large",options:n.options},model:{value:n.createForm.area,callback:function(t){n.$set(n.createForm,"area",t)},expression:"createForm.area"}})],1),n._v(" "),a("el-form-item",{attrs:{label:"主办方",prop:"sponsor"}},[a("el-input",{attrs:{placeholder:"请输入主办方"},model:{value:n.createForm.sponsor,callback:function(t){n.$set(n.createForm,"sponsor",t)},expression:"createForm.sponsor"}})],1),n._v(" "),a("el-form-item",{attrs:{label:"地址",prop:"address"}},[a("el-input",{attrs:{placeholder:"请输入地址"},model:{value:n.createForm.address,callback:function(t){n.$set(n.createForm,"address",t)},expression:"createForm.address"}})],1),n._v(" "),a("el-form-item",{attrs:{label:"经度",prop:"lng"}},[a("el-input",{attrs:{placeholder:"请输入经度"},model:{value:n.createForm.lng,callback:function(t){n.$set(n.createForm,"lng",t)},expression:"createForm.lng"}})],1),n._v(" "),a("el-form-item",{attrs:{label:"纬度",prop:"lat"}},[a("el-input",{attrs:{placeholder:"请输入纬度"},model:{value:n.createForm.lat,callback:function(t){n.$set(n.createForm,"lat",t)},expression:"createForm.lat"}})],1),n._v(" "),n._l(n.tagList,function(r){return a("el-form-item",{key:r.id,staticClass:"reset-height",attrs:{label:r.className}},[a("el-checkbox-group",{model:{value:n.checkList,callback:function(t){n.checkList=t},expression:"checkList"}},n._l(r.tagName.split(","),function(t,e){return a("el-checkbox",{key:e,attrs:{label:r.className+","+t}},[n._v(n._s(t))])}))],1)})],2),n._v(" "),a("el-card",{staticClass:"box-card"},[a("el-form-item",{attrs:{label:"人数上限",prop:"limitNum"}},[a("el-input",{attrs:{placeholder:"请输入人数上限"},model:{value:n.createForm.limitNum,callback:function(t){n.$set(n.createForm,"limitNum",t)},expression:"createForm.limitNum"}})],1),n._v(" "),a("el-form-item",{attrs:{label:"虚拟增量",prop:"increment"}},[a("el-input",{attrs:{placeholder:"请输入虚拟增量"},model:{value:n.createForm.increment,callback:function(t){n.$set(n.createForm,"increment",t)},expression:"createForm.increment"}})],1),n._v(" "),a("el-form-item",{attrs:{label:"活动时间",prop:"datePicker"}},[a("el-date-picker",{attrs:{type:"datetimerange","value-format":"timestamp","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:n.createForm.datePicker,callback:function(t){n.$set(n.createForm,"datePicker",t)},expression:"createForm.datePicker"}})],1),n._v(" "),a("el-form-item",{attrs:{label:"正文内容",prop:"editorContent"}},[a("div",{ref:"editor",staticStyle:{"text-align":"left"}})]),n._v(" "),a("el-form-item",{attrs:{label:"报名表",prop:"signAble"}},[a("el-switch",{model:{value:n.createForm.signAble,callback:function(t){n.$set(n.createForm,"signAble",t)},expression:"createForm.signAble"}})],1),n._v(" "),n.createForm.signAble?a("el-form-item",{attrs:{label:"报名设置",prop:"explanation"}},[a("el-row",{staticClass:"activity-setting",attrs:{gutter:0}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入报名表说明"},model:{value:n.createForm.explanation,callback:function(t){n.$set(n.createForm,"explanation",t)},expression:"createForm.explanation"}})],1),n._v(" "),a("el-col",{attrs:{span:6}})],1),n._v(" "),a("el-row",{staticClass:"activity-setting",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{disabled:!0,value:"姓名"}})],1),n._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:n.name.enable,callback:function(t){n.$set(n.name,"enable",t)},expression:"name.enable"}},[n._v("启用")]),n._v(" "),a("el-checkbox",{model:{value:n.name.require,callback:function(t){n.$set(n.name,"require",t)},expression:"name.require"}},[n._v("必填")])],1)],1),n._v(" "),a("el-row",{staticClass:"activity-setting",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{disabled:!0,value:"电话"}})],1),n._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:n.phone.enable,callback:function(t){n.$set(n.phone,"enable",t)},expression:"phone.enable"}},[n._v("启用")]),n._v(" "),a("el-checkbox",{model:{value:n.phone.require,callback:function(t){n.$set(n.phone,"require",t)},expression:"phone.require"}},[n._v("必填")])],1)],1),n._v(" "),a("el-row",{staticClass:"activity-setting",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{disabled:!0,value:"邮箱"}})],1),n._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:n.email.enable,callback:function(t){n.$set(n.email,"enable",t)},expression:"email.enable"}},[n._v("启用")]),n._v(" "),a("el-checkbox",{model:{value:n.email.require,callback:function(t){n.$set(n.email,"require",t)},expression:"email.require"}},[n._v("必填")])],1)],1),n._v(" "),a("el-row",{staticClass:"activity-setting",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{disabled:!0,value:"身份证"}})],1),n._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:n.cert.enable,callback:function(t){n.$set(n.cert,"enable",t)},expression:"cert.enable"}},[n._v("启用")]),n._v(" "),a("el-checkbox",{model:{value:n.cert.require,callback:function(t){n.$set(n.cert,"require",t)},expression:"cert.require"}},[n._v("必填")])],1)],1)],1):n._e()],1),n._v(" "),a("div",{staticClass:"sc-top-attach"},[a("el-button",{attrs:{type:"primary"},on:{click:n.handleSubmit}},[n._v("提交")])],1)],1)],1)};n._withStripped=!0;var a=r(56),m=r.n(a),i=r(5),p=r.n(i),o=r(195),O=r.n(o),u=r(176),s=r.n(u),g=r(151),l=r(153),A=(r(152),r(196)),c={computed:{uploadUrl:function(){return l.c+"/admin/group/goUpload"}},components:{Cropper:r(158).a},data:function(){return{options:A.regionData,checkList:[],editor:null,tagList:[],createForm:{datePicker:null,title:null,imageUrl:null,sponsor:null,address:null,lat:null,lng:null,limitNum:null,increment:null,editorContent:"",signAble:!1,startTime:null,endTime:null,formJson:{},area:null,explanation:null},name:{enable:!0,require:!0},phone:{enable:!0,require:!0},email:{enable:!1,require:!1},cert:{enable:!1,require:!1},operatorId:null,rules:{title:[{required:!0,message:"请输入标题",trigger:["change","blur"]}],area:[{required:!0,message:"请选择地区",trigger:["change","blur"]}],address:[{required:!0,message:"请输入地址",trigger:["change","blur"]}],lng:[{required:!0,message:"请输入经度",trigger:["change","blur"]}],lat:[{required:!0,message:"请输入纬度",trigger:["change","blur"]}],limitNum:[{required:!0,message:"请输入人数上限",trigger:["change","blur"]}],datePicker:[{required:!0,message:"请选择活动时间",trigger:["change","blur"]}],imageUrl:[{required:!0,message:"请上传图片",trigger:["change","blur"]}]}}},mounted:function(){var e=this;this.editor=new s.a(this.$refs.editor),this.editor.customConfig.onchange=function(t){e.createForm.editorContent=t},this.editor.customConfig.uploadImgServer=l.c+"/admin/produce/wangUpload",this.editor.customConfig.uploadFileName="file",this.editor.customConfig.zIndex=100,this.editor.customConfig.uploadImgHooks={customInsert:function(t,e,r){t(e.data[0].url)}},this.editor.create(),this.$route.query.id&&this.getList(),this.getTag()},methods:{getTag:function(){var e=this,t={type:this.$route.query.type};Object(g.A)(t).then(function(t){e.tagList=t.data.tags})},getList:function(){var D=this,t=this.$route.query.id,e=this.$route.query.type;if(t){var r={id:t,type:e};Object(g.z)(r).then(function(t){var e=t.data.activity,r=e.address,n=e.begin,a=e.end,i=e.title,o=e.logo,u=e.sponsor,s=e.lat,l=e.lng,c=e.upperlimit,d=e.increment,m=e.signable,p=e.formjson,g=e.area,f=e.explanation,h=e.tip,v=t.data.article,b=v.content,y=(v.url,v.contenttype,A.TextToCode[g.split(",")[0]].code),w=A.TextToCode[g.split(",")[0]][g.split(",")[1]].code,k=A.TextToCode[g.split(",")[0]][g.split(",")[1]][g.split(",")[2]].code;D.createForm={datePicker:[1e3*n,1e3*a],title:i,imageUrl:o,sponsor:u,address:r,lat:s,lng:l,limitNum:c,increment:d,editorContent:b,signAble:m,explanation:f,area:[y,w,k]},D.editor.txt.html(b);var x=JSON.parse(p).formJson,_=x.name,C=x.phone,F=x.email,I=x.cert;D.name=_,D.phone=C,D.email=F,D.cert=I;var $=JSON.parse(h);if(!$)return!1;var S=!0,T=!1,q=void 0;try{for(var M,U=O()($);!(S=(M=U.next()).done);S=!0){var L=M.value,N=L.tagName.split(",");for(var R in N)D.checkList.push(L.className+","+N[R])}}catch(t){T=!0,q=t}finally{try{!S&&U.return&&U.return()}finally{if(T)throw q}}})}},handleAvatarSuccess:function(t,e){this.createForm.imageUrl=l.b+t.data.url},imageuploadedError:function(t){this.$message({type:"error",message:t})},handleSubmit:function(){var d=this;this.$refs.form.validate(function(t){if(t){var e=[A.CodeToText[d.createForm.area[0]],A.CodeToText[d.createForm.area[1]],A.CodeToText[d.createForm.area[2]]],r={formJson:{name:d.name,phone:d.phone,email:d.email,cert:d.cert}},n=null,a=null;d.createForm.datePicker&&0<d.createForm.datePicker.length&&(n=d.createForm.datePicker[0],a=d.createForm.datePicker[1]);for(var i=d.tagList.map(function(t){return{className:t.className}}),o=0;o<i.length;o++)for(var u=0;u<d.checkList.length;u++){var s=d.checkList[u].split(",")[0],l=d.checkList[u].split(",")[1];i[o].className===s&&(i[o].tagName?i[o].tagName=i[o].tagName+","+l:i[o].tagName=l)}var c=p()({},d.createForm,{id:d.$route.query.id,type:d.$route.query.type,area:e,formJson:m()(r),startTime:n,endTime:a,checkList:d.checkList.length?m()(i):[]});d.$route.query.id?Object(g.n)(c).then(function(t){d.$message({type:"success",message:"编辑成功"}),d.$router.push({name:"activity"})}):Object(g.R)(c).then(function(t){d.$message({type:"success",message:"添加成功"}),d.$router.push({name:"activity"})})}})}}},d=(r(248),r(1)),f=Object(d.a)(c,n,[],!1,null,null,null);f.options.__file="src/views/edit/activityNew.vue";e.default=f.exports}}]);